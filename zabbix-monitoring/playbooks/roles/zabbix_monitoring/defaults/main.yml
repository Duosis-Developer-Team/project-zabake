---
# Default variables for zabbix_monitoring role

# ========================================
# Zabbix Connection Settings
# ========================================
zabbix_url: "{{ lookup('env', 'ZABBIX_URL') | default('http://localhost/zabbix', true) }}"
zabbix_user: "{{ lookup('env', 'ZABBIX_USER') | default('Admin', true) }}"
zabbix_password: "{{ lookup('env', 'ZABBIX_PASSWORD') | default('zabbix', true) }}"

# ========================================
# Tag-Based Connectivity Settings
# ========================================
# Tag name to identify connection items
connection_tag: "connection status"

# Number of history values to analyze per item
history_limit: 10

# Minimum acceptable connectivity percentage
threshold_percentage: 70.0

# Host groups filter (empty for all hosts)
host_groups: ""

# ========================================
# Email Notification Settings
# ========================================
send_email: true

# SMTP settings
smtp_server: "{{ lookup('env', 'SMTP_SERVER') | default('localhost', true) }}"
smtp_port: "{{ lookup('env', 'SMTP_PORT') | default(25, true) }}"
smtp_username: "{{ lookup('env', 'SMTP_USERNAME') | default('', true) }}"
smtp_password: "{{ lookup('env', 'SMTP_PASSWORD') | default('', true) }}"

# Email addresses
email_from: "{{ lookup('env', 'EMAIL_FROM') | default('zabbix-monitoring@example.com', true) }}"
email_to: "{{ lookup('env', 'EMAIL_TO') | default('admin@example.com', true) }}"

# ========================================
# Debug and Logging Settings
# ========================================
debug_enabled: false
debug_output_dir: "/tmp/zabbix_monitoring_output"
debug_save_intermediate_files: true

log_level: "INFO"
log_file: "/tmp/zabbix_tag_based_monitoring.log"

# ========================================
# Legacy Mode Settings (DEPRECATED)
# ========================================
# Set to true ONLY if you need to use legacy template-based mode
# WARNING: Legacy mode will be removed in June 2026
use_legacy_mode: false

# Legacy task flags (only used if use_legacy_mode is true)
validate_config: false
run_data_collection: false
run_template_analysis: false
run_connectivity_detection: false
run_data_analysis: false
run_master_items_check: false
run_report_generation: false

# Template mapping file (legacy only)
template_mapping_file: "{{ playbook_dir }}/../mappings/templates.yml"

# ========================================
# Advanced Settings
# ========================================
# Data age thresholds (seconds)
max_data_age: 3600  # 1 hour
inactive_threshold: 7200  # 2 hours
master_item_threshold: 1800  # 30 minutes

# Minimum connectivity score (0.0 to 1.0)
min_connectivity_score: 0.8
