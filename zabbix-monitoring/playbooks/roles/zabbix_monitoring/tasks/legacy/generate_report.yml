---
# Generate final report (analysis results are already saved in analyze_data step)

- name: "Check if analysis results exist"
  stat:
    path: "{{ debug_output_dir }}/analysis_results.json"
  register: analysis_results_file

- name: "Verify analysis results file exists"
  fail:
    msg: "Analysis results file not found. Please run analyze_data step first."
  when: not analysis_results_file.stat.exists

- name: "Display report generation summary"
  debug:
    msg: |
      ============================================
      Report Generation Summary
      ============================================
      Analysis results available in: {{ debug_output_dir }}/analysis_results.json
      Master items check available in: {{ debug_output_dir }}/master_items_check.json
      Debug output directory: {{ debug_output_dir }}
      Log file: {{ log_file }}
      ============================================
      Note: Reports are sent via email only. No local file storage.
      ============================================
